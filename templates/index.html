<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Door Tag Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <h1>Door Tag Generator</h1>
  <p class="small-text">
    Upload your door tag templates, paste resident names (one per line), preview, then download a ZIP of all tags.
  </p>

  <form id="mainForm" action="/generate" method="post" enctype="multipart/form-data">
    <div class="section">
      <label for="images">1. Upload images &amp; set name positions</label>
      <input
        type="file"
        id="images"
        name="images"
        multiple
        accept=".png,.jpg,.jpeg"
      />
      <p class="small-text">
        You can upload multiple templates; they will be cycled through for each name.
      </p>
      <div id="template-previews"></div>
    </div>

    <div class="section">
      <label for="names">2. Paste names (one per line)</label>
      <textarea
        id="names"
        name="names"
        placeholder="Example:
Alice
Bob
Charlie"
        required
      >Alex
Sam
Christopher
Elizabeth
Benjamin
Olivia
Montgomery
Isabella</textarea>
      <div id="name-count" class="small-text">0 names</div>
      <p class="small-text">
        Tip: copy the first-name column from Excel and paste it directly here.
      </p>
    </div>

    <div class="section">
      <label for="font_color">3. Choose text color</label>
      <input type="color" id="font_color" name="font_color" value="#FFFFFF" />
    </div>

    <div class="section" id="font-section">
      <label for="font_name">4. Choose a font</label>
      <select id="font_name" name="font_name">
        {% for name, path in fonts.items() %}
          <option value="{{ name }}" {% if name == default_font %}selected{% endif %}>{{ name }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="section">
      <label>5. Preview &amp; Generate</label>
      <div class="buttons">
        <button type="button" id="arrangeBtn" title="Generate a preview and drag names to position them on each template.">Arrange Names</button>
        <button type="button" id="previewBtn" title="See how the final tags will look with the current name positions." disabled>Preview Tags</button>
        <button type="submit" id="generateBtn" style="margin-left: auto;" title="Generate all door tags and download them in a ZIP file.">Generate ZIP</button>
      </div>
      <div id="status"></div>
      <div id="preview-image-container" style="display: none;">
        <h3 id="mode-indicator"></h3>
        <p id="mode-instructions" class="small-text"></p>
        <div id="preview-grid"></div>
      </div>
    </div>
  </form>
  <input type="hidden" id="positions" name="positions" form="mainForm">

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
